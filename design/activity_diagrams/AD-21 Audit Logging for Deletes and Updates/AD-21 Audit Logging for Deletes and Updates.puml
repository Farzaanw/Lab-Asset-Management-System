@startuml
title Audit Logging for Deletes and Updates

partition "Audit Logging" {

    start

    :Receive system action event;
    :Identify actor (user role);
    :Identify action type;
    :Identify target entity;
    :Record timestamp and reason;

    ' Universal audit entry
    :Write audit entry;

    if (Asset operation?) then (yes)
        :Process asset CRUD;
        :Write audit entry;
    else (no)
        :Continue to next category;
    endif

    if (Reservation operation?) then (yes)
        :Process reservation modification;
        :Write audit entry;
    else (no)
        :Continue;
    endif

    if (OOS operation?) then (yes)
        :Process OOS update;
        :Write audit entry;
    else (no)
        :Continue;
    endif

    if (Approval operation?) then (yes)
        :Process approval update;
        :Write audit entry;
    else (no)
        :Continue;
    endif

    if (Privilege change?) then (yes)
        :Apply new permissions;
        :Write audit entry;
    else (no)
        :Continue;
    endif

    if (Check-in/out event?) then (yes)
        :Process check-in/out;
        :Write audit entry;
    else (no)
        :Continue;
    endif

    if (Inventory adjustment?) then (yes)
        :Apply adjustment;
        :Write audit entry;
    else (no)
        :Continue;
    endif

    :Receive audit dashboard request;
    :Filter audit log by actor, action, entity, timestamp, reason;
    :Return filtered entries;
    :Provide export option;

    stop
}
@enduml

